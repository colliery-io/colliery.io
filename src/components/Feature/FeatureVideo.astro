---
/**
 * * Large video feature. This is for a self-hosted video (under src/assets/videos).
 */

import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

// components
import Badge from "@components/Badge/Badge.astro";
---

<section id="feature-video" class="my-8 overflow-x-clip py-8">
	<div class="site-container">
		<div class="mx-auto max-w-5xl">
			<div class="flex justify-center">
				<Badge>Video</Badge>
			</div>

			<div class="mx-auto flex max-w-xl justify-center text-center">
				<h2 class="h2 relative mx-4">See how we can help you</h2>
			</div>
			<div class="relative mx-auto mt-10 flex max-w-4xl justify-center">
				<!-- Button to play video -->
				<button
					class="group relative h-full rounded-2xl"
					aria-label="play video"
					id="feature-video__play-button"
				>
					<div class="z-10 mx-auto h-[600px] w-full rounded-2xl bg-gray-200 dark:bg-gray-800">
						<div class="flex h-full items-center justify-center">
							<div class="relative m-auto aspect-square h-[20%] max-h-16">
								<!-- background glow of play button -->
								<div
									class="bg-primary-500/70 absolute inset-2 z-10 rounded-full motion-safe:animate-ping"
								>
								</div>
								<!-- play button -->
								<div
									class="bg-primary-500 group-hover:bg-primary-600 xs:p-4 relative z-20 h-full w-full rounded-full p-2 transition-all duration-300"
								>
									<Icon
										name="tabler/player-play"
										class="text-base-50 m-auto aspect-square h-full w-full"
										aria-hidden="true"
									/>
								</div>
							</div>
						</div>
					</div>

					<Icon
						name="atlas/wave"
						class="text-primary-500 absolute -top-8 -left-8 z-10 h-auto w-40"
						aria-hidden="true"
					/>
					<Icon
						name="atlas/wave"
						class="text-accent-1 absolute -right-8 -bottom-8 -z-10 h-auto w-40"
						aria-hidden="true"
					/>
				</button>
			</div>
		</div>
	</div>
</section>

<script>
	function setupVideoPlayer() {
		const playButton = document.getElementById("feature-video__play-button") as HTMLButtonElement;

		// open video on play button press
		playButton?.addEventListener("click", () => {
			// Video functionality removed
			console.log("Video play button clicked - video functionality removed");
		});
	}

	// runs on initial page load
	setupVideoPlayer();

	// runs on view transitions navigation
	document.addEventListener("astro:after-swap", setupVideoPlayer);
</script>

<style>
	.feature-video__backdrop-button--show {
		animation: fadeInAnimation ease-in-out 0.3s forwards;
	}

	@keyframes fadeInAnimation {
		0% {
			visibility: hidden;
			opacity: 0;
		}
		100% {
			visibility: visible;
			opacity: 0.7;
		}
	}
</style>